{% extends "bootstrap/base.html" %}
{% block title %}Results{% endblock %}

{% block content %}

<!-- Content of the popup options -->
<div class="modal fade" id="optionsModal">
	<div class="modal-dialog">
		<div class="modal-content modal-lg"></div>
	</div>
</div>

<!-- Content of the popup movie info -->
<div class="modal fade" id="movieModal">
	<div class="modal-dialog">
		<div class="modal-content"></div>
	</div>
</div>

<div class="jumbotron">

	<!-- Search box -->
	<div class="container text-center">
		<form method="get" action="{{ url_for('search') }}">
			<div class="form-inline">
				<h1><a href="{{ url_for('home') }}" style="color: black; text-decoration: none;">Movie Search Engine</a></h1><br>
				<input type="text" class="form-control" placeholder="Search movie..." name="searchterm", autocomplete="off">
				<button class="btn btn-default">Search</button>
				<a class="small" href="{{ url_for('options') }}" data-target="#optionsModal"
				data-toggle="modal" data-toggle="modal">Options</a>
			</div>
		</form>
	</div>
	
<div class="container">
	<h4>You searched for: {{session.get('query', '')}} ({{ session.get('count', '') }} results)</h4>
</div>

<!-- A Bootstrap Grid to populate the movie covers -->
<div class="row">
	<div class="col-xm-1"></div>
	{% for movie in results %}
	<div class="col-lg-2">
		<figure class="figure img-thumbnail">
			<a href="{{ url_for( 'movie_info', info=(movie['title'], movie['cover'], movie['director'], movie['writer'], movie['cast'], movie['year'], movie['runtime'], movie['rating'], movie['genre'], movie['studio'], movie['overview']) ) }}" data-target="#movieModal" data-toggle="modal"	data-toggle="modal"><img src="{{ movie['cover'] }}" class="img-fluid" alt="{{ url_for('static', filename='stockImage.jpg') }}"></a>	
			<figcaption class="figure-caption text-left">Score: {{ movie['score'] }}</figcaption>	
			<figcaption class="figure-caption text-left">Year: {{ movie['year'] }}</figcaption>	
			<figcaption class="figure-caption text-left">{{ movie['runtime'] }} minutes</figcaption>	

		</figure>
	</div>
	{% endfor %} 
</div>




{% block scripts %}
{{ super() }}

<!-- Script to reset the content of the popup window -->
<script>
	$(document).ready(function() {
		$(".modal").on("hidden.bs.modal", function() {
			$(this).removeData();
		});
	});
</script>

{% endblock %}

